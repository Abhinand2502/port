<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Futuristic — Portfolio (Fixed)</title>
  <style>
    /* ------------------------------
       Design tokens
       ------------------------------ */
    :root{
      --bg: #ffffff;
      --surface: rgba(255,255,255,0.04);
      --text: #ffffff;
      --muted: #d0d0d0;
      --accent: #ffffff;
      --accent-anim: #00e6ff;
      --glass: rgba(255,255,255,0.03);
      --glass-strong: rgba(255,255,255,0.06);
      --card: rgba(255,255,255,0.02);
      --shadow: 0 6px 24px rgba(0,0,0,0.28);
      --radius: 14px;
      --gap: clamp(12px, 2vw, 28px);
      --bleed: 32px;
      --max-width: 1200px;
      --nav-height: 72px;
      --glass-border: rgba(255,255,255,0.06);
      --social-bg: rgba(0,0,0,0.65);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      --link-anim-start: rgba(255,255,255,0.06);
      --link-anim-end: rgba(255,255,255,0.12);

      --header-bg: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      --header-border: rgba(255,255,255,0.06);

      --hero-brightness: 0.62;
      --hero-overlay-start: rgba(0,0,0,0.24);
      --hero-overlay-end: rgba(0,0,0,0.32);

      --section-bg-light: #f5f5f5;
      --section-card-light: #ffffff;
    }

    [data-theme="dark"]{
      --bg: #050505;
      --surface: rgba(0,0,0,0.45);
      --text: #ffffff;
      --muted: #bdbdbd;
      --accent: #ffffff;
      --glass: rgba(255,255,255,0.03);
      --glass-strong: rgba(255,255,255,0.06);
      --card: #0b0b0b;
      --shadow: 0 8px 30px rgba(0,0,0,0.6);
      --glass-border: rgba(255,255,255,0.04);
      --link-anim-start: rgba(255,255,255,0.06);
      --link-anim-end: rgba(255,255,255,0.12);
      --social-bg: rgba(0,0,0,0.65);

      --header-bg: linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.12));
      --header-border: rgba(255,255,255,0.04);

      --hero-brightness: 0.42;
      --hero-overlay-start: rgba(0,0,0,0.35);
      --hero-overlay-end: rgba(0,0,0,0.45);
    }

    @media (prefers-color-scheme: dark){
      :root:not([data-theme]){ --bg: #050505; --text:#f8f8f8; --accent:#fff }
    }

    /* ------------------------------
       Base & layout
       ------------------------------ */
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
      font-size:16px;
      transition:background .35s ease, color .35s ease;
      scroll-behavior: smooth;
      scroll-snap-type: y mandatory;
    }

    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}

    section{scroll-snap-align: start;scroll-margin-top: calc(var(--nav-height) + 8px);} 

    @media (prefers-reduced-motion: reduce){html,body{ scroll-behavior: auto; scroll-snap-type: none; } section{ scroll-snap-align: none; scroll-margin-top: 0; }}

    .container{max-width:var(--max-width);margin:0 auto;padding:0 20px;}

    .skip-link{position:absolute;left:8px;top:8px;background:#000;color:#fff;padding:8px 12px;border-radius:6px;z-index:200;transform:translateY(-120%);transition:transform .18s ease;}
    .skip-link:focus{transform:translateY(0%);}    

    /* Header / Nav */
    header{position:fixed;inset:0 0 auto 0;height:var(--nav-height);display:flex;align-items:center;z-index:160;backdrop-filter: blur(8px) saturate(120%);background: var(--header-bg);border-bottom:1px solid var(--header-border);padding:0 20px;gap:16px;transition:background .35s ease, border .25s ease, color .25s ease;}

    header.light-outside-hero .brand .text,header.light-outside-hero .nav-links a,header.light-outside-hero .btn,header.light-outside-hero .primary,header.light-outside-hero .secondary{color: #0a0a0a !important;border-color: rgba(0,0,0,0.08) !important}

    .brand{font-weight:700;letter-spacing:0.06em;font-size:clamp(18px,1.6vw,22px);display:flex;align-items:center;gap:12px}
    .brand .logo{width:36px;height:36px;border-radius:8px;display:grid;place-items:center;font-weight:800;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid var(--glass-border)}

    nav{margin-left:auto;display:flex;align-items:center;gap:18px}
    .nav-links{display:flex;gap:24px;align-items:center}
    .nav-links a{color:var(--text);text-decoration:none;padding:10px 16px;border-radius:12px;font-weight:700;position:relative;transition:color .25s ease, transform .18s ease;overflow:visible;display:inline-block;letter-spacing:0.02em}
    .nav-links a:focus{ outline: 3px solid rgba(255,255,255,0.08); outline-offset:4px; }

    .nav-links a::after{content:"";position:absolute;left:8px;right:8px;bottom:6px;height:4px;border-radius:6px;background: linear-gradient(120deg, rgba(255,255,255,0.06), rgba(255,255,255,0.18), rgba(255,255,255,0.06));opacity:0;transform: translateY(6px) scaleX(0.85);transition: opacity .28s ease, transform .36s cubic-bezier(.2,.9,.2,1);will-change: transform, opacity;background-size: 200% 100%;background-position: 0% 50%}

    .nav-links a:hover::after,.nav-links a:focus::after{opacity:1;transform: translateY(0) scaleX(1);animation: shimmer 1s linear infinite}
    @keyframes shimmer{0%{ background-position: 0% 50%;}100%{ background-position: 200% 50%;}}

    .nav-links a:hover{ transform: translateY(-3px); }

    .nav-links a.active{ color:var(--accent-anim); }
    .nav-links a.active::after{opacity:1; transform: translateY(0) scaleX(1); background: linear-gradient(90deg, var(--accent-anim), #8ab4ff, #ffffff); animation: activeGradient 2.8s linear infinite}
    @keyframes activeGradient{ 0%{ background-position:0% 50%; } 100%{ background-position:200% 50%; } }

    .actions{display:flex;align-items:center;gap:10px}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border-radius:10px;border:1px solid var(--glass-border);background:transparent;font-weight:600;cursor:pointer;color:var(--text)}
    .btn:focus{outline:2px solid rgba(255,255,255,0.06);outline-offset:2px}

    /* ------------------------------
       Modern Hamburger (updated)
       ------------------------------ */
    .hamburger{
      display:none;
      border:0;
      background:var(--glass-strong);
      padding:0;
      border-radius:12px;
      cursor:pointer;
      color:var(--text);
      width:48px;
      height:48px;
      align-items:center;
      justify-content:center;
      position:relative;
      display:inline-flex;
      transition: transform .18s ease, background .18s ease, box-shadow .18s ease;
      box-shadow: 0 6px 14px rgba(0,0,0,0.08);
      -webkit-tap-highlight-color: transparent;
    }
    .hamburger:focus{outline:3px solid rgba(255,255,255,0.08);outline-offset:3px}
    .hamburger .bars{ display:inline-flex; flex-direction:column; align-items:center; justify-content:center; gap:6px; width:28px; height:20px; position:relative; }
    .hamburger .bar{
      display:block;
      width:28px;
      height:3px;
      background:currentColor;
      border-radius:99px;
      transition: transform .36s cubic-bezier(.2,.9,.2,1), opacity .2s ease, width .28s ease;
      transform-origin:center;
    }
    .hamburger .bar.small{ width:18px; opacity:0.95 }

    /* Animated ring (subtle) */
    .hamburger::after{
      content: "";
      position: absolute;
      inset: 6px;
      border-radius: 12px;
      border: 1px solid transparent;
      pointer-events: none;
      transition: transform .28s cubic-bezier(.2,.9,.2,1), opacity .2s ease, border-color .28s ease;
      transform: scale(.88);
      opacity: 0;
    }
    .hamburger:hover{ transform: translateY(-2px); }

    /* Open state: morph into X with ring */
    .hamburger.open .bar1{ transform: translateY(6px) rotate(45deg); }
    .hamburger.open .bar2{ opacity:0; transform: scaleX(.4); }
    .hamburger.open .bar3{ transform: translateY(-6px) rotate(-45deg); }
    .hamburger.open::after{ opacity:1; transform: scale(1); border-color: var(--accent-anim); box-shadow: 0 8px 30px rgba(0,0,0,0.18); }

    /* subtle pressed */
    .hamburger:active{ transform: translateY(1px) scale(.995) }

    /* Ensure accessible focus outline for each bar when keyboard-focused */
    .hamburger:focus .bar{ box-shadow: 0 0 0 4px rgba(255,255,255,0.04); }

    /* Theme toggle */
    #themeToggle{width:44px;height:44px;border-radius:10px;display:grid;place-items:center;border:1px solid var(--glass-border);background:var(--glass-strong); color:var(--text); cursor:pointer;transition: transform .12s ease, box-shadow .12s ease, background .18s ease;box-shadow: 0 4px 12px rgba(0,0,0,0.06);padding:0}
    #themeToggle svg{ display:block; stroke:currentColor; }
    #themeToggle:active{ transform: translateY(1px) }
    #themeToggle:focus{ outline: 3px solid rgba(255,255,255,0.08); outline-offset:3px; }

    /* ------------------------------
       Hero / Home
       ------------------------------ */
    .hero{min-height: 100vh;padding-top: 0;display:flex;align-items:center;justify-content:center;position:relative; overflow:hidden;background: none;flex-direction:column}
    .hero::before{content:"";position:absolute;inset:0;background-image: url('assets/bg.jpg');background-size: cover;background-position: center center;background-repeat: no-repeat;z-index:1;filter: grayscale(100%) contrast(1.06) brightness(var(--hero-brightness)) saturate(0.6);transition: filter .35s ease, opacity .35s ease, transform .35s ease;transform-origin:center}

    .hero .overlay{position:absolute;inset:0;z-index:2;pointer-events:none}
    .hero .overlay{ background: linear-gradient(180deg, var(--hero-overlay-start), var(--hero-overlay-end)); }

    .hero .content{position:relative;z-index:3;width:100%;display:flex;align-items:center;justify-content:center}
    .hero .container.content{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;z-index:4;padding: calc(var(--nav-height) + 24px) 20px 48px 20px;box-sizing: border-box;max-width: 1100px;margin: 0 auto}

    .hero .kicker{font-size:14px;letter-spacing:0.28em;text-transform:uppercase;color:var(--muted);margin-bottom:18px}
    @media (max-width: 768px) {
  .kicker {
    position: relative;
    top: -2cm; /* move up by 2 cm */
  }
}

    .hero h1{font-size:clamp(34px,6vw,68px);margin:0;line-height:0.96;letter-spacing:-0.02em; font-weight:800}
    .hero p{max-width:820px;font-size:clamp(16px,1.2vw,18px);color:var(--muted);margin-top:14px}

    .hero .actions{margin-top:28px;display:flex;gap:12px;flex-wrap:wrap; justify-content:center}
/* Button styles (primary) */
.primary {
  background: rgba(255, 255, 255, 0.12);
  border: 0.8px solid rgba(0, 123, 255, 0.6);
  padding: 12px 20px;
  border-radius: 14px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.85);
  text-decoration: none;
  display: inline-block;
  transition: transform 0.28s ease, background-color 0.28s ease, border-color 0.28s ease, box-shadow 0.28s ease, opacity 0.28s ease;
  cursor: pointer;
}

.primary:hover {
  background: rgba(255, 255, 255, 0.22);
  border-color: rgba(0, 123, 255, 0.9);
  color: rgba(255, 255, 255, 1);
  transform: translateY(-3px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}

/* Lightbox Modal Styles */
.modal {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.3); /* slightly dim overlay */
}

/* Almost fully transparent glass panel */
.modal-content {
  background: rgba(255, 255, 255, 0.01); /* extremely transparent */
  backdrop-filter: blur(8px) saturate(180%); /* soft frosted effect */
  -webkit-backdrop-filter: blur(8px) saturate(180%);
  border-radius: 18px;
  margin: 5% auto;
  padding: 20px 20px 25px 20px;
  width: 90%;
  max-width: 800px;
  text-align: center;
  position: relative;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08); /* very subtle shadow */
}

/* Resume image inside modal */
.resume-image {
  width: 100%;
  max-height: 70vh;
  object-fit: contain;
  border-radius: 8px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.15); /* subtle shadow for visibility */
  margin-bottom: 20px;
}

/* Close button */
.close {
  position: absolute;
  top: 12px;
  right: 18px;
  color: #fff; /* white color */
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  text-shadow: 0 0 4px rgba(0,0,0,0.5);
}

/* Download button */
.download-btn {
  display: inline-block;
  background: rgba(0,123,255,0.6); /* semi-transparent button */
  color: #fff;
  padding: 10px 18px;
  border-radius: 12px;
  text-decoration: none;
  font-weight: 700;
  transition: background 0.28s ease;
}

.download-btn:hover {
  background: rgba(0,123,255,1); /* solid on hover */
}

/* Responsive for mobile devices */
@media screen and (max-width: 768px) {
  .modal-content {
    width: 95%;
    max-width: 95%;
    margin: 80px auto 20px auto; /* 80px to leave space for header */
    padding: 15px 15px 20px 15px;
    max-height: calc(100vh - 100px); /* prevent overflow on all screen sizes */
  }

  .resume-image {
    max-height: 60vh; /* fit mobile screen */
  }
}


   .secondary {
  background: rgba(255, 255, 255, 0.12); /* partially transparent background */
  border: 0.8px solid rgba(255, 255, 255, 0.6); /* thinner solid semi-transparent border */
  padding: 10px 16px;
  border-radius: 10px;
  color: rgba(255, 255, 255, 0.85); /* partially transparent text */
  text-decoration: none;             /* remove underline */
  display: inline-block;
  transition: 
      transform 0.28s ease,
      background-color 0.28s ease,
      border-color 0.28s ease,
      box-shadow 0.28s ease,
      opacity 0.28s ease;
  cursor: pointer;
}

/* Hover: stronger visibility and movement */
.secondary:hover {
  background: rgba(255, 255, 255, 0.22); /* more visible on hover */
  border-color: rgba(255, 255, 255, 0.9); /* stronger border on hover */
  color: rgba(255, 255, 255, 1);          /* text fully visible */
  transform: translateY(-3px);             /* subtle lift */
  box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}


    /* ------------------------------
       Content style
       ------------------------------ */
    main{display:block}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px}
    .col-6{grid-column:span 6}
    .card{background:linear-gradient(180deg, var(--card), var(--surface));border-radius:12px;padding:20px;border:1px solid var(--glass-border);box-shadow:var(--shadow)}

    .projects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
    .project{padding:18px;border-radius:12px;border:1px solid var(--glass-border);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));}
    .project h3{margin:0 0 8px 0}
    .project p{margin:0;color:var(--muted)}

    .contact-form{display:grid;gap:12px}
    .input,textarea{padding:12px;border-radius:10px;border:1px solid var(--glass-border);background:transparent;color:var(--text)}
    textarea{min-height:120px}

    /* Floating social (desktop only). We'll hide on small screens */
    .social-fixed{position:absolute;right:20px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:14px;z-index:110}
    .social-fixed a{display:inline-grid;place-items:center;width:64px;height:64px;border-radius:14px;border:1px solid rgba(255,255,255,0.06);background:var(--social-bg);text-decoration:none;color:#ffffff;transition: transform .18s ease, box-shadow .18s ease, background .25s, color .25s ease;box-shadow: 0 6px 18px rgba(0,0,0,0.12)}
    .social-fixed a:hover{ transform: translateY(-8px); box-shadow: 0 18px 40px rgba(0,0,0,0.18); }
    .social-fixed svg{ width:28px;height:28px; display:block; stroke:currentColor; fill:currentColor; }

    section.section{ padding: 80px 0; }
    [data-theme="light"] section.section{ background: var(--section-bg-light); color: #0a0a0a; }
    [data-theme="light"] section.section .card{ background: var(--section-card-light); color: #0a0a0a; border-color: rgba(0,0,0,0.06); box-shadow: 0 6px 20px rgba(0,0,0,0.06); }

    /* Mobile adjustments */
    @media (max-width:900px){
      .nav-links{display:none}
      .hamburger{display:inline-flex}
      header{padding:0 14px}
      .social-fixed{display:none !important}
      .hero h1{font-size:clamp(28px,7vw,48px)}
      .hero .container { z-index:4; position:relative; padding-bottom:36px; }

      .brand .text { display: none; }
      .actions { margin-left: 8px; }
      .brand .logo { width:32px; height:32px; }

      .hero .container.content { padding-top: calc(var(--nav-height) + 16px); padding-bottom: 32px; align-items: center; text-align: center; }
      #themeToggle, .hamburger { width:48px; height:48px; }
      #themeToggle { border-radius: 12px; }

      .actions { display:flex; align-items:center; gap:10px; }

      /* SWITCHED ORDER: theme toggle first, hamburger second on mobile */
      .hamburger{ order: 2 }
      #themeToggle{ order: 1 }

      /* MOBILE-SPECIFIC BACKGROUND IMAGE (changed per request):
         use assets/bg1.jpg on mobile while preserving desktop image (assets/bg.jpg)
      */
      .hero::before{ background-image: url('assets/bg1.jpg'); }
    }

    /* Ensure hamburger is never shown on desktop explicitly */
    @media (min-width:901px){
      .hamburger{ display:none !important; }
    }

    /* Mobile nav overlay (sheet)
       - sheet starts below the header (so header remains visible).
       - sheet is slightly transparent with backdrop blur so content beneath subtly shows through.
       - text inside sheet is explicitly colored for dark/light themes so readability is preserved.
    */
    .mobile-nav{
      position:fixed;
      /* start the overlay below the header so the header remains visible above the sheet */
      inset: var(--nav-height) 0 0 0;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      z-index:150; /* lower than header (160) so header remains above the sheet */
      visibility:hidden;
      pointer-events:none;
      background: rgba(0,0,0,0.12);
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
    }

    .mobile-nav.open{visibility:visible;pointer-events:auto}

    /* Slightly transparent sheet with blur for readability */
    .mobile-nav .sheet{
      width: calc(100% - 32px);
      max-width:760px;
      /* unified slightly black transparent background for both modes */
      border-radius:12px;
      margin:12px auto 0;
      border:1px solid var(--glass-border);
      transform:translateY(-12%);
      opacity:0;
      visibility:hidden;
      transition:transform .28s cubic-bezier(.2,.9,.25,1),opacity .28s ease,visibility .18s;
      box-shadow:0 30px 80px rgba(0,0,0,0.5);
      max-height: calc(100vh - (var(--nav-height) + 48px));
      overflow: auto;
      -webkit-overflow-scrolling: touch;
      /* ensure sheet text uses high-contrast white on top of the subtle black overlay */
      color: #ffffff;
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);
      background: rgba(0,0,0,0.36); /* little black transparent in both modes */
    }
    .mobile-nav.open .sheet{transform:translateY(0);opacity:1;visibility:visible}

    /* Keep border color subtle and readable for both themes */
    .mobile-nav .sheet{ border-color: rgba(255,255,255,0.06); }

    .mobile-nav .panel{padding:18px}
    .mobile-nav .close-tab{display:flex;justify-content:flex-end}
    .mobile-nav .close-btn{
      background:var(--glass-strong);
      color:var(--text);
      border:1px solid var(--glass-border);
      padding:8px 12px;
      border-radius:10px;
      cursor:pointer;
      font-size:18px;
      line-height:1;
    }
    .mobile-nav .close-btn:focus{ outline: 3px solid rgba(255,255,255,0.08); outline-offset:6px; }

    /* Links: blue by default; override to black in light mode only (per your request) */
    .mobile-nav a{display:block;padding:12px 0;font-weight:700;text-decoration:none;color:#0a84ff; font-size:18px}
    [data-theme="light"] .mobile-nav a{ color: #0a0a0a; } /* <-- changed: hamburger links black in light mode only */

    /* --------- NEW: When in light mode AND we are on the home section, make mobile links white ---------
       We will toggle the `home-white` class on the .mobile-nav element via JS when on the home section.
       This rule intentionally comes after the earlier [data-theme="light"] rule so it overrides it. */
    [data-theme="light"] .mobile-nav.home-white a { color: #ffffff; }

    /* focus outlines adapt to theme so they are visible on both backgrounds */
    .mobile-nav a:focus{ outline-offset:6px; border-radius:6px; }
    /* dark theme outline */
    .mobile-nav a:focus{ outline: 3px solid rgba(255,255,255,0.08); }
    /* light theme outline override (still visible on the dark sheet) */
    [data-theme="light"] .mobile-nav a:focus{ outline: 3px solid rgba(255,255,255,0.08); }

    .mobile-socials{display:flex;gap:12px;justify-content:center;margin-top:12px}
    .mobile-socials a{width:56px;height:56px;border-radius:12px;display:grid;place-items:center;background:var(--social-bg);color:#fff;text-decoration:none;border:1px solid rgba(255,255,255,0.04)}
    [data-theme="light"] .mobile-socials a{ background: rgba(0,0,0,0.12); color: #ffffff; border-color: rgba(255,255,255,0.04); }

    @media (max-width:420px){.mobile-socials a{width:48px;height:48px;border-radius:10px}.mobile-nav a{font-size:17px}}

    /* LIGHT-MODE HEADER OVERRIDES */
    [data-theme="light"] header, [data-theme="light"] header.light-outside-hero { background: #000000 !important; border-bottom-color: rgba(255,255,255,0.15) !important; }
    [data-theme="light"] header .brand .text, [data-theme="light"] header .nav-links a, [data-theme="light"] header .btn, [data-theme="light"] header .primary, [data-theme="light"] header .secondary, [data-theme="light"] header #themeToggle { color: #ffffff !important; border-color: rgba(255,255,255,0.18) !important; }
    [data-theme="light"] header .nav-links a::after{ background: linear-gradient(120deg, rgba(255,255,255,0.18), rgba(255,255,255,0.36), rgba(255,255,255,0.18)) !important; }

    @media (prefers-reduced-motion: reduce){*{transition:none !important}}
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  <header role="banner">
    <div class="container" style="display:flex;align-items:center;width:100%">
      <div class="brand" aria-hidden="false">
        <div class="logo" aria-hidden="true">AB</div>
        <div class="text">Abhinand_Babu</div>
      </div>

      <nav role="navigation" aria-label="Main navigation">
        <div class="nav-links" id="navLinks">
          <a href="#home">Home</a>
          <a href="#about">About</a>
          <a href="#projects">Projects</a>
          <a href="#contact">Contact</a>
        </div>
      </nav>

      <div class="actions" style="margin-left:12px">
        <!-- hamburger: only visible on mobile (via CSS media query) -->
        <button class="hamburger" id="hamburgerBtn" aria-label="Open menu" aria-controls="mobileNav" aria-expanded="false" title="Open menu">
          <span class="bars" aria-hidden="true">
            <span class="bar bar1"></span>
            <span class="bar bar2 small"></span>
            <span class="bar bar3"></span>
          </span>
        </button>

        <!-- Theme toggle -->
        <p><p></p></p><button class="btn" id="themeToggle" aria-pressed="false" title="Toggle dark / light mode" aria-label="Toggle theme" ></button>
      </div>
    </div>
  </header>

  <!-- Mobile nav overlay (top sheet) -->
  <div class="mobile-nav" id="mobileNav" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="mobileNavLabel">
      <div class="panel">
        <h2 id="mobileNavLabel" class="visually-hidden">Mobile navigation</h2>

        <!-- NOTE: close button removed per request. Panel has semi-transparent background now. -->
        <a href="#home" data-close>Home</a>
        <a href="#about" data-close>About</a>
        <a href="#projects" data-close>Projects</a>
        <a href="#contact" data-close>Contact</a>

        <!-- copy of the floating socials (kept at same visual size as desktop) -->
        <div style="height:12px"></div>
        <div class="mobile-socials" aria-hidden="false">
          <!-- Instagram (accurate glyph) -->
          <a href="https://www.instagram.com/_abhinand_babu/" aria-label="Instagram" title="Instagram (opens in new tab)" target="_blank" rel="noopener">
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.4" fill="none"/><circle cx="12" cy="12" r="3.2" stroke="currentColor" stroke-width="1.4" fill="none"/><circle cx="17.7" cy="6.3" r="0.6" fill="currentColor"/></svg>
          </a>

          <!-- GitHub (official silhouette) -->
          <a href="https://github.com/Abhinand2502" aria-label="GitHub" title="GitHub (opens in new tab)" target="_blank" rel="noopener">
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M12 .5C5.73.5.8 5.43.8 11.7c0 4.87 3.16 9 7.55 10.46.55.1.75-.24.75-.53v-1.86c-3.07.66-3.72-1.48-3.72-1.48-.5-1.28-1.22-1.62-1.22-1.62-.99-.67.07-.66.07-.66 1.09.08 1.67 1.12 1.67 1.12.98 1.68 2.57 1.2 3.2.92.1-.73.38-1.2.7-1.48-2.45-.28-5.03-1.22-5.03-5.43 0-1.2.42-2.18 1.1-2.95-.11-.27-.48-1.36.1-2.84 0 0 .9-.29 2.95 1.11a10.3 10.3 0 0 1 2.68-.36c.91 0 1.83.12 2.68.36 2.05-1.4 2.95-1.11 2.95-1.11.58 1.48.21 2.57.10 2.84.69.77 1.1 1.75 1.1 2.95 0 4.22-2.59 5.14-5.05 5.42.39.34.73 1 .73 2.05v3.04c0 .29.2.64.76.53C19 20.7 22.2 16.57 22.2 11.7 22.2 5.43 17.27.5 12 .5z" fill="currentColor"/></svg>
          </a>

          <!-- LinkedIn (official glyph) -->
          <a href="https://www.linkedin.com/in/abhinand-babu-153b66324/" aria-label="LinkedIn" title="LinkedIn (opens in new tab)" target="_blank" rel="noopener">
            <svg viewBox="0 0 448 512" width="20" height="20" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.9 0 54.3 0 24.7 24.09.5 53.79.5s53.79 24.2 53.79 53.8c0 29.6-24.08 53.8-53.79 53.8zM447.9 448h-92.7V302.4c0-34.7-12.4-58.4-43.4-58.4-23.7 0-37.8 16-44 31.4-2.3 5.6-2.9 13.4-2.9 21.2V448h-92.7s1.2-241.7 0-267.1h92.7v37.8c-.2.3-.5.7-.7 1h.7v-1c12.3-19 34.3-46.1 83.6-46.1 61 0 106.8 39.9 106.8 125.6V448z" fill="currentColor"/></svg>
          </a>

          <!-- Email -->
          <!-- Email -->
      <a href="#" onclick="openEmail()" title="Email" aria-label="Email">

<script>
function openEmail() {
  const isMobile = /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(
    navigator.userAgent
  );

  if (isMobile) {
    // Mobile → open default mail app
    window.location.href = "mailto:abhinandbabu2502@gmail.com";
  } else {
    // Desktop → open Gmail in browser
    window.open(
      "https://mail.google.com/mail/?view=cm&fs=1&to=abhinandbabu2502@gmail.com",
      "_blank"
    );
  }
}
</script>
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M2 6.5A2.5 2.5 0 0 1 4.5 4h15A2.5 2.5 0 0 1 22 6.5v11A2.5 2.5 0 0 1 19.5 20h-15A2.5 2.5 0 0 1 2 17.5v-11z" stroke="currentColor" stroke-width="1.2" fill="none"/><path d="M3 6.8l8.9 6.2a2 2 0 0 0 2.2 0L23 6.8" stroke="currentColor" stroke-width="1.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= HERO / HOME ================= -->
  <section class="hero" id="home" aria-label="Home section">
    <!-- floating socials (desktop only) -->
    <div class="social-fixed" aria-hidden="false">
      <!-- Instagram -->
      <a href="https://www.instagram.com/_abhinand_babu/" title="Instagram (opens in new tab)" aria-label="Instagram" target="_blank" rel="noopener">
        <svg viewBox="0 0 24 24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.4" fill="none"/><circle cx="12" cy="12" r="3.2" stroke="currentColor" stroke-width="1.4" fill="none"/><circle cx="17.7" cy="6.3" r="0.6" fill="currentColor"/></svg>
      </a>

      <!-- GitHub -->
      <a href="https://github.com/Abhinand2502" title="GitHub (opens in new tab)" aria-label="GitHub" target="_blank" rel="noopener">
        <svg viewBox="0 0 24 24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M12 .5C5.73.5.8 5.43.8 11.7c0 4.87 3.16 9 7.55 10.46.55.1.75-.24.75-.53v-1.86c-3.07.66-3.72-1.48-3.72-1.48-.5-1.28-1.22-1.62-1.22-1.62-.99-.67.07-.66.07-.66 1.09.08 1.67 1.12 1.67 1.12.98 1.68 2.57 1.2 3.2.92.1-.73.38-1.2.7-1.48-2.45-.28-5.03-1.22-5.03-5.43 0-1.2.42-2.18 1.1-2.95-.11-.27-.48-1.36.1-2.84 0 0 .9-.29 2.95 1.11a10.3 10.3 0 0 1 2.68-.36c.91 0 1.83.12 2.68.36 2.05-1.4 2.95-1.11 2.95-1.11.58 1.48.21 2.57.10 2.84.69.77 1.1 1.75 1.1 2.95 0 4.22-2.59 5.14-5.05 5.42.39.34.73 1 .73 2.05v3.04c0 .29.2.64.76.53C19 20.7 22.2 16.57 22.2 11.7 22.2 5.43 17.27.5 12 .5z" fill="currentColor"/></svg>
      </a>

      <!-- LinkedIn -->
      <a href="https://www.linkedin.com/in/abhinand-babu-153b66324/" title="LinkedIn (opens in new tab)" aria-label="LinkedIn" target="_blank" rel="noopener">
        <svg viewBox="0 0 448 512" width="28" height="28" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.9 0 54.3 0 24.7 24.09.5 53.79.5s53.79 24.2 53.79 53.8c0 29.6-24.08 53.8-53.79 53.8zM447.9 448h-92.7V302.4c0-34.7-12.4-58.4-43.4-58.4-23.7 0-37.8 16-44 31.4-2.3 5.6-2.9 13.4-2.9 21.2V448h-92.7s1.2-241.7 0-267.1h92.7v37.8c-.2.3-.5.7-.7 1h.7v-1c12.3-19 34.3-46.1 83.6-46.1 61 0 106.8 39.9 106.8 125.6V448z" fill="currentColor"/></svg>
      </a>

      <!-- Email -->
      <a href="#" onclick="openEmail()" title="Email" aria-label="Email">

<script>
function openEmail() {
  const isMobile = /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(
    navigator.userAgent
  );

  if (isMobile) {
    // Mobile → open default mail app
    window.location.href = "mailto:abhinandbabu2502@gmail.com";
  } else {
    // Desktop → open Gmail in browser
    window.open(
      "https://mail.google.com/mail/?view=cm&fs=1&to=abhinandbabu2502@gmail.com",
      "_blank"
    );
  }
}
</script>

        <svg viewBox="0 0 24 24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M2 6.5A2.5 2.5 0 0 1 4.5 4h15A2.5 2.5 0 0 1 22 6.5v11A2.5 2.5 0 0 1 19.5 20h-15A2.5 2.5 0 0 1 2 17.5v-11z" stroke="currentColor" stroke-width="1.2" fill="none"/><path d="M3 6.8l8.9 6.2a2 2 0 0 0 2.2 0L23 6.8" stroke="currentColor" stroke-width="1.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </a>
    </div>

    <div class="overlay" aria-hidden="true"></div>
    <div class="container content">
      <div style="max-width:980px">
        <div class="kicker">Designer • Developer • Futurist</div>
        <h1>HELLO<br/><span style="opacity:.9">I'm Abhinand Babu</span></h1>
        <p>B.Tech Computer Science Engineer with a strong foundation in software development and web technologies.</p>
        <div class="actions">
          <!-- View Resume Button -->
<a class="primary" href="#" id="viewResumeBtn">View Resume</a>
<a class="secondary" href="#contact">Get In Touch</a>

<!-- Lightbox Modal -->
<div id="resumeModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <img src="assets/resume.jpg" alt="Resume" class="resume-image">
    <a href="assets/Resume.pdf" download class="download-btn">Download PDF</a>
  </div>
</div>
<script>
  const modal = document.getElementById("resumeModal");
  const btn = document.getElementById("viewResumeBtn");
  const span = document.querySelector(".close");

  // Open modal
  btn.onclick = function(e) {
    e.preventDefault();
    modal.style.display = "block";
  }

  // Close modal when clicking the close button
  span.onclick = function() {
    modal.style.display = "none";
  }

  // Close modal when clicking outside the modal content
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>
        </div>
      </div>
    </div>
  </section>

  <!-- ================= MAIN CONTENT ================= -->
  <main id="main">
    <section class="section" id="about" aria-label="About section">
      <div class="container">
        <div class="grid">
          <div class="col-6">
            <div class="card">
              <h2>About me</h2>
              <p style="color:var(--muted)">A short intro about your design philosophy and technical chops. Mention frameworks, tools, or industries you specialize in. Keep this concise and punchy — use bullets if needed.</p>
              <ul style="color:var(--muted);margin-top:12px">
                <li>UI/UX design systems</li>
                <li>Modern frontend (HTML, CSS, JavaScript)</li>
                <li>Accessibility & performance-first</li>
              </ul>
            </div>
          </div>
          <div class="col-6">
            <div class="card">
              <h3>Skills</h3>
              <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
                <span class="btn">HTML</span>
                <span class="btn">CSS</span>
                <span class="btn">JavaScript</span>
                <span class="btn">React</span>
                <span class="btn">Figma</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="projects" aria-label="Projects">
      <div class="container">
        <h2>Projects</h2>
        <div class="projects-grid" style="margin-top:16px">
          <article class="project"><h3>Project One</h3><p>Short description. Tech used: HTML, CSS, JS.</p></article>
          <article class="project"><h3>Project Two</h3><p>Short description. Interactive prototype.</p></article>
          <article class="project"><h3>Project Three</h3><p>Short description. Accessibility-first.</p></article>
        </div>
      </div>
    </section>

    <section class="section" id="contact" aria-label="Contact">
      <div class="container">
        <div style="max-width:720px;margin:0 auto">
          <h2>Contact</h2>
          <p style="color:var(--muted)">Interested in working together? Send a quick message.</p>
          <form class="contact-form" onsubmit="event.preventDefault(); alert('Demo: form submitted — wire up your backend');">
            <input class="input" type="text" placeholder="Your name" required />
            <input class="input" type="email" placeholder="Email" required />
            <textarea placeholder="Message" class="input"></textarea>
            <div style="display:flex;gap:12px;margin-top:8px">
              <button class="primary" type="submit">Send</button>
              <button class="secondary" type="button" onclick="location.href='#home'">Back</button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container" style="padding:24px 0">
      <small>&copy; <span id="year"></span> Abhinand — Built with care.</small>
    </div>
  </footer>

  <script>
    // Initialize year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Theme toggle (robust, persists to localStorage, respects system changes when not explicitly set)
    const root = document.documentElement;
    const THEME_KEY = 'fw_theme_mode';
    const themeToggle = document.getElementById('themeToggle');
    const header = document.querySelector('header');
    const hero = document.getElementById('home');

    // Improved theme icons
    const sunSvg = '<svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4" /><path d="M12 2v2M12 20v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M2 12h2M20 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/></svg>';
    const moonSvg = '<svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.8A9 9 0 1 1 11.2 3 7 7 0 0 0 21 12.8z"/></svg>';

    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const mobileNav = document.getElementById('mobileNav');
    // mobileCloseBtn intentionally not present (removed from markup)
    const mobileCloseBtn = document.getElementById('mobileCloseBtn') || null;

    let heroVisible = true; // tracks if hero is in view

    function updateToggleUI(theme){
      themeToggle.innerHTML = theme === 'dark' ? moonSvg : sunSvg;
      themeToggle.setAttribute('aria-pressed', theme === 'dark');
      themeToggle.title = theme === 'dark' ? 'Dark mode active — switch to light' : 'Light mode active — switch to dark';
      themeToggle.setAttribute('aria-label', theme === 'dark' ? 'Dark mode' : 'Light mode');
      themeToggle.style.color = getComputedStyle(root).getPropertyValue('--text');
      themeToggle.style.background = getComputedStyle(root).getPropertyValue('--glass-strong');
    }

    function updateHeaderContrast(){
      const theme = root.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
      if(theme === 'light' && !heroVisible) header.classList.add('light-outside-hero');
      else header.classList.remove('light-outside-hero');

      // NEW: toggle mobile nav link color when in light mode AND we are on the home section
      // - when both true, add 'home-white' class to the mobileNav element so CSS makes links white
      // - otherwise ensure the class is removed so light-mode links remain black (original behavior)
      try {
        if (mobileNav) {
          if (theme === 'light' && heroVisible) mobileNav.classList.add('home-white');
          else mobileNav.classList.remove('home-white');
        }
      } catch (e) {
        // silent fail-safe; we intentionally do not break other behavior
      }
    }

    function applyTheme(theme){
      if(theme === 'dark') root.setAttribute('data-theme','dark');
      else root.setAttribute('data-theme','light');
      updateToggleUI(theme);
      document.querySelectorAll('.social-fixed a').forEach(a=> a.style.color = '#ffffff');
      document.querySelectorAll('header .nav-links a, .btn, .primary, .secondary').forEach(el=> el.style.color = getComputedStyle(root).getPropertyValue('--text'));
      updateHeaderContrast();
    }

    (function(){
      const saved = localStorage.getItem(THEME_KEY);
      if(saved) applyTheme(saved);
      else {
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        applyTheme(prefersDark ? 'dark' : 'light');
      }
    })();

    const mq = window.matchMedia('(prefers-color-scheme: dark)');
    mq.addEventListener?.('change', (e)=>{
      const saved = localStorage.getItem(THEME_KEY);
      if(!saved) applyTheme(e.matches ? 'dark' : 'light');
    });

    themeToggle.addEventListener('click', ()=>{
      const current = root.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
      const next = current === 'dark' ? 'light' : 'dark';
      applyTheme(next);
      localStorage.setItem(THEME_KEY, next);
    });
    themeToggle.addEventListener('keyup', (e)=>{ if(e.key === 'Enter' || e.key === ' ') themeToggle.click(); });

    // Observe hero visibility to toggle header text color in light-mode
    const heroObserver = new IntersectionObserver((entries)=>{
      entries.forEach(entry => {
        heroVisible = entry.isIntersecting;
        updateHeaderContrast();
      });
    }, { root: null, threshold: 0.22 });
    if(hero) heroObserver.observe(hero);

    /* ==============
       Mobile nav + hamburger handling (robust + CSS animated icon)
       ============== 
    */

    // Force an initial closed state to prevent accidental open on some browsers
    (function initMobileState(){
      try{
        if(mobileNav){
          mobileNav.classList.remove('open');
          mobileNav.setAttribute('aria-hidden','true');
        }
        if(hamburgerBtn){
          hamburgerBtn.classList.remove('open');
          hamburgerBtn.setAttribute('aria-expanded','false');
          hamburgerBtn.setAttribute('aria-label','Open menu');
        }
      }catch(e){ /* silent fallback */ }
    })();

    // simple focus trap variables
    let trapFocusHandler = null;

    function trapFocus(container){
      const focusable = container.querySelectorAll('a[href], button:not([disabled]), textarea, input, select');
      const first = focusable[0];
      const last = focusable[focusable.length - 1];
      trapFocusHandler = function(e){
        if(e.key !== 'Tab') return;
        if(e.shiftKey){ if(document.activeElement === first){ e.preventDefault(); last.focus(); } }
        else { if(document.activeElement === last){ e.preventDefault(); first.focus(); } }
      };
      container.addEventListener('keydown', trapFocusHandler);
    }
    function releaseTrap(container){ if(trapFocusHandler) container.removeEventListener('keydown', trapFocusHandler); trapFocusHandler = null; }

    function openMobile(){
      if(!mobileNav || !hamburgerBtn) return;
      mobileNav.classList.add('open');
      mobileNav.setAttribute('aria-hidden','false');
      hamburgerBtn.classList.add('open');
      hamburgerBtn.setAttribute('aria-expanded','true');
      hamburgerBtn.setAttribute('aria-label','Close menu');
      // lock scroll
      document.documentElement.style.overflow = 'hidden';
      document.body.style.overflow = 'hidden';
      // focus first link
      const firstLink = mobileNav.querySelector('[data-close]');
      if(firstLink) firstLink.focus();
      // trap focus inside sheet
      const sheet = mobileNav.querySelector('.sheet');
      if(sheet) trapFocus(sheet);
    }
    function closeMobile(){
      if(!mobileNav || !hamburgerBtn) return;
      mobileNav.classList.remove('open');
      mobileNav.setAttribute('aria-hidden','true');
      hamburgerBtn.classList.remove('open');
      hamburgerBtn.setAttribute('aria-expanded','false');
      hamburgerBtn.setAttribute('aria-label','Open menu');
      // restore scroll
      document.documentElement.style.overflow = '';
      document.body.style.overflow = '';
      // release focus trap
      const sheet = mobileNav.querySelector('.sheet');
      if(sheet) releaseTrap(sheet);
      try{ hamburgerBtn.focus(); }catch(e){}
    }

    // attach listeners safely
    if(hamburgerBtn && mobileNav){
      hamburgerBtn.addEventListener('click', (e)=>{
        e.stopPropagation();
        if(mobileNav.classList.contains('open')) closeMobile();
        else openMobile();
      });
      hamburgerBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter' || e.key === ' ') hamburgerBtn.click(); });
    }

    // mobileCloseBtn is intentionally not in DOM; listeners only attach if present
    if(mobileCloseBtn){
      mobileCloseBtn.addEventListener('click', (e)=>{ e.stopPropagation(); closeMobile(); });
      mobileCloseBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter' || e.key === ' ') closeMobile(); });
    }

    // close when clicking any link inside sheet
    if(mobileNav){
      mobileNav.querySelectorAll('[data-close]').forEach(el=>el.addEventListener('click', (e)=>{ closeMobile(); }));

      // close when clicking outside the sheet (on backdrop)
      mobileNav.addEventListener('click', (e)=>{ if(e.target === mobileNav) closeMobile(); });
    }

    // ensure mobile closes on desktop resize
    window.addEventListener('resize', ()=>{ if(window.innerWidth > 900) closeMobile(); });

    // Close on ESC globally
    window.addEventListener('keydown', (e) => { if(e.key === 'Escape' && mobileNav && mobileNav.classList.contains('open')) closeMobile(); });

    // Smooth scroll for in-page links
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', function(e){
        const href = this.getAttribute('href');
        if(!href || href === '#') return;
        const target = document.querySelector(href);
        if(target){
          e.preventDefault();
          if(mobileNav && mobileNav.classList.contains('open')) closeMobile();
          target.scrollIntoView({behavior:'smooth',block:'start'});
        }
      });
    });

    // Scrollspy (unchanged)
    (function(){
      const sections = document.querySelectorAll('section[id]');
      const navLinks = document.querySelectorAll('.nav-links a');

      const linkMap = Array.from(navLinks).reduce((acc, a) => { acc[a.getAttribute('href')] = a; return acc; }, {});

      const observer = new IntersectionObserver((entries)=>{
        entries.forEach(entry => {
          const id = entry.target.id ? `#${entry.target.id}` : null;
          if(entry.isIntersecting && id){
            Object.values(linkMap).forEach(l => { l.classList.remove('active'); l.removeAttribute('aria-current'); });
            const active = linkMap[id];
            if(active){ active.classList.add('active'); active.setAttribute('aria-current','true'); }
          }
        });
      },{ root: null, rootMargin: '-40% 0px -40% 0px', threshold: 0 });

      sections.forEach(s => observer.observe(s));
      window.addEventListener('load', ()=>{ setTimeout(()=>{}, 60); });
    })();

    /* Section snap (unchanged) */
    (function(){
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(prefersReduced) return;

      const sections = Array.from(document.querySelectorAll('section[id]'));
      if(!sections.length) return;

      let isAutoScrolling = false;
      let touchStartY = null;
      let lastWheelTime = 0;
      const SCROLL_TIMEOUT = 800; // ms

      function indexOfNearestSection(){
        const scrollTop = window.scrollY || window.pageYOffset;
        let bestIndex = 0;
        let bestDistance = Infinity;
        for(let i=0;i<sections.length;i++){
          const rect = sections[i].getBoundingClientRect();
          const distance = Math.abs((rect.top + window.scrollY) - scrollTop);
          if(distance < bestDistance){ bestDistance = distance; bestIndex = i; }
        }
        return bestIndex;
      }

      function scrollToSectionIndex(i){
        if(i < 0) i = 0;
        if(i >= sections.length) i = sections.length - 1;
        const target = sections[i];
        if(!target) return;
        isAutoScrolling = true;
        target.scrollIntoView({behavior: 'smooth', block: 'start'});
        clearTimeout(window._sectionSnapTimer);
        window._sectionSnapTimer = setTimeout(()=>{ isAutoScrolling = false; }, SCROLL_TIMEOUT);
      }

      function onWheel(e){
        if(isAutoScrolling) { e.preventDefault(); return; }
        const now = Date.now();
        if(now - lastWheelTime < 120) return;
        lastWheelTime = now;

        const delta = e.deltaY;
        if(Math.abs(delta) < 10) return;

        e.preventDefault();

        const currentIndex = indexOfNearestSection();
        if(delta > 0) scrollToSectionIndex(currentIndex + 1);
        else scrollToSectionIndex(currentIndex - 1);
      }

      function onTouchStart(e){ if(e.touches && e.touches.length === 1) touchStartY = e.touches[0].clientY; else touchStartY = null; }
      function onTouchEnd(e){
        if(isAutoScrolling || touchStartY === null) return;
        const touchEndY = (e.changedTouches && e.changedTouches[0] && e.changedTouches[0].clientY) || null;
        if(touchEndY === null) return;
        const diff = touchStartY - touchEndY;
        const abs = Math.abs(diff);
        const THRESHOLD = Math.max(40, window.innerHeight * 0.06);
        if(abs < THRESHOLD) return;
        const currentIndex = indexOfNearestSection();
        if(diff > 0) scrollToSectionIndex(currentIndex + 1);
        else scrollToSectionIndex(currentIndex - 1);
        touchStartY = null;
      }

      window.addEventListener('wheel', onWheel, {passive:false});
      window.addEventListener('touchstart', onTouchStart, {passive:true});
      window.addEventListener('touchend', onTouchEnd, {passive:false});

      window.addEventListener('keydown', (e) => {
        if(isAutoScrolling) return;
        const key = e.key;
        let currentIndex = indexOfNearestSection();
        if(key === 'PageDown' || key === 'ArrowDown'){ e.preventDefault(); scrollToSectionIndex(currentIndex + 1); }
        else if(key === 'PageUp' || key === 'ArrowUp'){ e.preventDefault(); scrollToSectionIndex(currentIndex - 1); }
        else if(key === 'Home'){ e.preventDefault(); scrollToSectionIndex(0); }
        else if(key === 'End'){ e.preventDefault(); scrollToSectionIndex(sections.length - 1); }
      });
    })();

  </script>
</body>
</html>
